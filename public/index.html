<!doctype html>
<html>
<head><meta charset="utf-8"><title>Requesthub — Send Request</title></head>
<body style="font-family:system-ui, Arial; padding:20px; max-width:720px;">
<h1>Requesthub — Send Request</h1>
<form id="f">
  <input name="name" placeholder="Your name" required style="width:100%"><br><br>
  <input name="email" placeholder="Email" required style="width:100%"><br><br>
  <select name="purpose" style="width:100%">
    <option>Question</option>
    <option>Appointment</option>
    <option>Chat request</option>
    <option>Other</option>
  </select><br><br>
  <input name="referral" placeholder="Referral code (optional)" style="width:100%"><br><br>
  <textarea name="message" placeholder="Message" required style="width:100%;height:140px"></textarea><br><br>
  <button>Send Request</button>
</form>
<script>
document.getElementById('f').addEventListener('submit', async (e) => {
  e.preventDefault();
  const o = Object.fromEntries(new FormData(e.target).entries());
  const r = await fetch('/api/request', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(o) });
  const j = await r.json();
  if (j.ok) {
    alert('Sent. Token: ' + j.token);
    location.href = j.statusUrl;
  } else {
    alert('Error: ' + (j.error || 'unknown'));
    console.error(j);
  }
});
</script>
</body>
</html>
